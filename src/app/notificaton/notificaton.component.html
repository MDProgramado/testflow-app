<div class="notification-wrapper">
  <div class="dropdown">
    <button #notificationDropdown id="notificationDropdown" class="btn btn-icon bg-light position-relative" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Abrir notificações">
      <i class="bi bi-bell fs-5" aria-hidden="true"></i>
      <span *ngIf="unreadCount > 0" class="position-absolute top-0 start-75 translate-middle badge rounded-pill bg-danger border border-light" [attr.aria-label]="'Você tem ' + unreadCount + ' notificações não lidas'">
        {{ unreadCount }}
      </span>
    </button>

    <ul class="dropdown-menu dropdown-menu-end shadow-lg notification-list-container" aria-labelledby="notificationDropdown">
      <li>
        <div class="d-flex justify-content-between align-items-center dropdown-header">
          <h6 class="mb-0">Notificações</h6>
          <a href="javascript:void(0)" (click)="markAllAsRead()" *ngIf="notifications.length > 0" class="small text-decoration-none" aria-label="Marcar todas as notificações como lidas">Marcar todas como lidas</a>
        </div>
      </li>

      <li *ngIf="notifications.length === 0" class="px-3 py-2 text-center text-muted">
        <i class="bi bi-check2-circle d-block fs-3" aria-hidden="true"></i>
        <span>Você está em dia!</span>
      </li>

      <!-- Loop de notificações -->
      <li *ngFor="let notification of notifications">
        <a 
        (click)="onNotificationClick(notification)" 
   class="dropdown-item d-flex align-items-start notification-item" 
   [class.unread]="!notification.isRead"
   role="menuitem" 
   [attr.aria-label]="notification.message"
    [routerLink]="['/tasks', notification.id]"> <!-- Usando routerLink -->
  
  <i class="bi me-3 fs-5" [ngClass]="getNotificationClass(notification.type)" aria-hidden="true"></i>

  <div class="d-flex flex-column">
    <span>{{ notification.message }}</span>
    <small class="text-muted mt-1" aria-hidden="true">{{ notification.timestamp | date:'dd/MM/yyyy HH:mm' }}</small>
  </div>

  <button (click)="dismissNotification(notification, $event)" class="btn-close ms-auto p-2" aria-label="Dispensar notificação"></button>
</a>
      </li>
    </ul>
  </div>
</div>
